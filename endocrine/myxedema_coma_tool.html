<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Myxedema Coma Severity Tool</title>
<style>
:root {
    --primary: #9b5de5;
    --secondary: #f7c948;
    --bg1: #fdf7ff;
    --bg2: #f3eaff;
    --card-bg: #ffffff;
    --text: #3a2a4c;
    --radius: 14px;
}
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, var(--bg1), var(--bg2));
    padding: 20px;
    color: var(--text);
}
h1 {
    text-align: center;
    color: var(--primary);
    font-size: 26px;
    margin-bottom: 20px;
}
.card {
    background: var(--card-bg);
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    max-width: 650px;
    margin: 0 auto 25px auto;
}
label {
    font-weight: bold;
    display: block;
    margin-top: 12px;
}
input, select {
    width: 100%;
    padding: 9px;
    border-radius: var(--radius);
    border: 1px solid #ccc;
    margin-top: 5px;
    font-size: 15px;
}
button {
    width: 100%;
    padding: 14px;
    margin-top: 20px;
    background: var(--primary);
    color: white;
    font-size: 17px;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: 0.2s;
}
button:hover {
    background: #8649d6;
}
h2 {
    color: var(--primary);
    margin-top: 20px;
}
.output {
    white-space: pre-line;
    padding: 12px;
    background: #fff7e6;
    border-left: 5px solid var(--secondary);
    border-radius: var(--radius);
    margin-top: 8px;
}
.nav-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 25px;
}
.nav-buttons a {
    text-decoration: none;
    background: var(--secondary);
    padding: 10px 14px;
    border-radius: var(--radius);
    color: #5b440b;
    font-weight: bold;
    box-shadow: 0 3px 6px rgba(0,0,0,0.15);
}
.disclaimer {
    font-size: 12px;
    color: #6b5b7a;
}
</style>
</head>
<body>
<h1>Myxedema Coma Severity Tool</h1>
<div class="card">
    <div class="disclaimer">
        Approximate severity score; for educational use only. Not a substitute for clinical judgment or local protocols.
    </div>

    <label>Core temperature (°C)</label>
    <input id="temp" type="number" step="0.1">

    <label>Heart rate (bpm)</label>
    <input id="hr" type="number">

    <label>Systolic BP (mmHg)</label>
    <input id="sbp" type="number">

    <label>Sodium (mEq/L)</label>
    <input id="na" type="number">

    <label>Mental status</label>
    <select id="cns">
        <option value="0">Alert / oriented</option>
        <option value="10">Lethargic / somnolent</option>
        <option value="20">Stupor</option>
        <option value="30">Coma / seizures</option>
    </select>

    <label>Respiratory status</label>
    <select id="resp">
        <option value="0">Normal</option>
        <option value="10">Hypoventilation / hypercapnia</option>
        <option value="20">Respiratory failure requiring ventilatory support</option>
    </select>

    <label>Precipitating factor (infection, surgery, MI, sedatives, etc.)</label>
    <select id="precip">
        <option value="0">None obvious</option>
        <option value="10">Possible</option>
        <option value="20">Definite major precipitant present</option>
    </select>

    <label>Known long-standing hypothyroidism?</label>
    <select id="known_hypo">
        <option value="0">No / unknown</option>
        <option value="10">Yes</option>
    </select>

    <button onclick="calcMyxedema()">Calculate Severity</button>

    <h2>Score & Severity</h2>
    <div id="score" class="output"></div>

    <h2>Management Considerations</h2>
    <div id="mgmt" class="output"></div>

    <h2>Copy to Clipboard</h2>
    <button onclick="copyMyxedema()">Copy Summary</button>
    <div id="copytext" class="output"></div>

    <div class="nav-buttons">
        <a href="index.html">Home</a>
        <a href="endocrine_emergencies.html">Back to Endocrine</a>
    </div>
</div>

<script>
function getNum(id) {
    const v = document.getElementById(id).value;
    const n = parseFloat(v);
    return isNaN(n) ? null : n;
}

function calcMyxedema() {
    const temp = getNum("temp");
    const hr = getNum("hr");
    const sbp = getNum("sbp");
    const na = getNum("na");
    const cns = parseInt(document.getElementById("cns").value || "0", 10);
    const resp = parseInt(document.getElementById("resp").value || "0", 10);
    const precip = parseInt(document.getElementById("precip").value || "0", 10);
    const knownHypo = parseInt(document.getElementById("known_hypo").value || "0", 10);

    let score = 0;

    // Temperature
    if (temp !== null) {
        if (temp >= 35) score += 0;
        else if (temp >= 34) score += 10;
        else if (temp >= 32) score += 20;
        else score += 30;
    }

    // Heart rate
    if (hr !== null) {
        if (hr >= 60) score += 0;
        else if (hr >= 50) score += 10;
        else if (hr >= 40) score += 20;
        else score += 30;
    }

    // BP
    if (sbp !== null) {
        if (sbp >= 100) score += 0;
        else if (sbp >= 80) score += 10;
        else score += 20;
    }

    // Sodium
    if (na !== null) {
        if (na >= 130) score += 0;
        else if (na >= 120) score += 10;
        else score += 20;
    }

    // CNS, respiratory, precipitant, known hypothyroidism
    score += cns + resp + precip + knownHypo;

    let severityText = "";
    if (score < 40) {
        severityText = "Score " + score + " – myxedema coma unlikely, but patient may still have decompensated hypothyroidism.";
    } else if (score < 60) {
        severityText = "Score " + score + " – concerning for severe hypothyroidism / possible myxedema coma. Treat aggressively and monitor in high-acuity setting.";
    } else {
        severityText = "Score " + score + " – highly suggestive of myxedema coma. Requires ICU-level care and emergent endocrine management.";
    }

    let mgmt = [];
    mgmt.push("• Secure airway and support ventilation; correct hypoxia/hypercapnia.");
    mgmt.push("• Aggressive but cautious warming (avoid rapid rewarming).");
    mgmt.push("• IV hydrocortisone (e.g., 100 mg q8h) empirically until adrenal insufficiency excluded.");
    mgmt.push("• IV levothyroxine loading dose (e.g., 200–400 mcg) then daily IV/PO as per local protocol and endocrine consult.");
    mgmt.push("• Consider adding liothyronine (T3) in select cases with specialist input.");
    mgmt.push("• Correct hyponatremia, hypoglycemia, and other metabolic derangements.");
    mgmt.push("• Identify and treat precipitating factors (infection, MI, sedatives, cold exposure, etc.).");

    const mgmtText = mgmt.join("\n");
    const copy = "Myxedema coma severity score: " + score + "\n" +
                 severityText + "\n\nManagement considerations:\n" + mgmtText;

    document.getElementById("score").innerText = severityText;
    document.getElementById("mgmt").innerText = mgmtText;
    document.getElementById("copytext").innerText = copy;
}

function copyMyxedema() {
    navigator.clipboard.writeText(document.getElementById("copytext").innerText);
    alert("Copied!");
}
</script>
</body>
</html>
